<section layout="row" id="table-header-{{tableId}}" class="tw-table-header" ng-if="!hideHeader">
    <div layout="row" style="{{headerStyle}}">

        <div class="tw-table-cell tw-table-line-number-cell" ng-if="lineNumber">
        </div>

        <div class="tw-table-cell tw-table-check-cell" ng-if="selectable">
            <md-checkbox aria-label="check all" ng-checked="allAreSelected()" ng-click="toggleAll()" />
        </div>

        <div class="tw-table-cell x{{column.size}}" ng-show="(!compact||!column.optional) &&! column.hide" ng-class="{'numeric':column.numeric,'tw-table-button-cell':column.type==='button','tw-table-text-cell':column.type!=='button'}"
            ng-repeat="column in columns">
            <div ng-if="column.sortable" ng-click="sort(column)" class="sort-handler">
                <span>{{column.title}}</span>
                <md-icon ng-show="sortField===column.path && sortDesc" md-font-set="material-icons">keyboard_arrow_down</md-icon>
                <md-icon ng-show="sortField===column.path && !sortDesc" md-font-set="material-icons">keyboard_arrow_up</md-icon>
            </div>
            <span ng-if="!column.sortable">{{column.title}}</span>
        </div>
    </div>
</section>

<md-virtual-repeat-container id="table-container-{{tableId}}">
    <div style="{{containerStyle}}" class="tw-table-row" layout="row" md-virtual-repeat="item in data" ng-class="{'selected':isItemSelected(item), 'clickable':itemClicked}"
        ng-click="onItemClicked(item, $event)">
        <div class="tw-table-cell tw-table-line-number-cell" ng-if="lineNumber">
            {{$index+1}}
        </div>

        <div ng-if="selectable" class="tw-table-cell tw-table-check-cell">
            <md-checkbox aria-label="select" ng-checked="isItemSelected(item)" ng-click="toggleItemSelected(item, $event)" />
        </div>

        <div ng-repeat="column in columns" ng-show="(!compact||!column.optional) && !column.hide" class="tw-table-cell x{{column.size}}"
            ng-class="{'tw-table-button-cell':column.type==='button', 'numeric':column.numeric,'tw-table-text-cell':column.type!=='button'}">

            <md-tooltip ng-if="column.tooltip && !column.tooltipFn">{{column.tooltip}}</md-tooltip>
            <md-tooltip ng-if="column.tooltipFn">{{column.tooltipFn(item)}}</md-tooltip>

            <md-button ng-if="column.type==='button'" class="md-icon-button md-primary" ng-click="onCellClicked($event, item, column)">
                <md-icon md-font-set="material-icons">{{column.icon}}</md-icon>
            </md-button>
            <span ng-click="onCellClicked($event, item, column)" ng-if="column.type!=='button'" ng-class="{'clickable':column.onClicked}"
              ng-bind-html="getCellText(item, column)"  class="cell-text">
               </span>
        </div>
    </div>

    <div class="md-padding" layout="row" layout-align="center center">
        <md-button class="md-primary" ng-click="loadMore()" ng-show="data.length<totalCount&&!isLoading">Load More</md-button>
        <md-progress-circular md-mode="indeterminate" ng-show="isLoading"></md-progress-circular>
        <span class="md-caption" ng-show="totalCount==0&&!isLoading">No item found.</span>
    </div>
</md-virtual-repeat-container>