!function(){"use strict";angular.module("tw.ui.table",["ngMaterial"]).filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).directive("dynamic",function(e){return{restrict:"A",replace:!0,link:function(t,l,n){t.$watch(n.dynamic,function(n){l.html(n),e(l.contents())(t)})}}}).directive("twUiTable",function(){var e=["$scope","$filter","$mdDialog",function(e,t,l){e.defaultDateFormat=e.defaultDateFormat||"MM/dd/yyyy",e.selectedItems=e.selectedItems||[],e.selectOnClick=e.selectOnClick||!1;var n=function(){e.selectionChanged&&e.selectionChanged()};e.$watchCollection("selectedItems",n),e.isItemSelected=function(t){return e.selectedItems.indexOf(t)>-1},e.toggleItemSelected=function(t){var l=e.selectedItems.indexOf(t);l>-1?e.selectedItems.splice(l,1):e.selectedItems.push(t)},e.onItemClicked=function(t){e.selectOnClick&&(e.selectedItems=[t]),e.itemClicked&&e.itemClicked(t)},e.showTooltip=function(e,t){l.show(l.alert().targetEvent(e).clickOutsideToClose(!0).textContent(t).ok("close"))},e.toggleAll=function(){e.allAreSelected()?e.selectedItems=[]:angular.forEach(e.data,function(t){e.selectedItems.indexOf(t)<0&&e.selectedItems.push(t)})},e.allAreSelected=function(){return e.selectedItems.length==e.data.length},e.getCellText=function(l,n){if(!n)throw"column definition is not defined.";if(!n.path)throw"path must be set, in: "+n;for(var c=n.path.split("."),i=0,o=l;i<c.length&&o;)o=o[c[i]],i++;if("undefined"==typeof o||null===o)return"";if("date"===n.dataType){var a=n.dateFormat||e.defaultDateFormat;o=t("date")(new Date(o),a)}if("function"==typeof n.render){var s=n.render(o,l,n);return"string"==typeof s?s:""+s}return o}}];return{restrict:"E",scope:{data:"=",columns:"=",selectable:"=",selectedItems:"=?",selectionChanged:"=?",itemClicked:"=?",selectOnClick:"=?",defaultDateFormat:"@?",compact:"=?",hideHeader:"="},controller:e,template:'<table ng-class="{\'selectable\':selectable}"><thead ng-if="!hideHeader"><tr><th ng-if="selectable"><md-checkbox aria-label="check all" ng-checked="allAreSelected()" ng-click="toggleAll()"></th><th ng-if="!compact||!column.optional" ng-class="{\'numeric\':column.numeric}" ng-repeat="column in columns">{{column.title}}</th></tr></thead><tbody><tr ng-class="{\'selected\':isItemSelected(item), \'clickable\':itemClicked}" ng-repeat="item in data"><td ng-if="selectable"><md-checkbox aria-label="select" ng-checked="isItemSelected(item)" ng-click="toggleItemSelected(item)"></td><td ng-if="!compact||!column.optional" ng-repeat="column in columns" ng-class="{\'numeric\':column.numeric}" ng-click="onItemClicked(item)"><span ng-if="column.render" dynamic="getCellText(item, column) | html"></span> <span ng-if="!column.render&&(!column.tooltipPath||!item[column.tooltipPath])">{{getCellText(item, column)}}</span> <span ng-if="!column.render&&(column.tooltipPath && item[column.tooltipPath])" ng-click="showTooltip($event, item[column.tooltipPath])" class="has-tooltip">{{getCellText(item, column)}}</span></td></tr></tbody></table>ng-bind-html=" | html"'}})}();