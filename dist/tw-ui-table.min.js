!function(){"use strict";angular.module("tw.ui.table",["ngMaterial"]).filter("html",["$sec",function(e){return function(e){return $sce.trustAsHtml(e)}}]).directive("dynamic",function(e){return{restrict:"A",replace:!0,link:function(t,n,o){t.$watch(o.dynamic,function(o){n.html(o),e(n.contents())(t)})}}}).directive("twUiTable",function(){var e=["$scope","$filter","$mdDialog","$window",function(e,t,n,o){e.defaultDateFormat=e.defaultDateFormat||"MM/dd/yyyy",e.selectedItems=e.selectedItems||[],e.selectOnClick=e.selectOnClick||!1,e.containerStyle=e.containerStyle||"height:100%;",e.totalCount=e.totalCount||10,e.itemCommands=e.itemCommands||{};var l=function(){e.selectionChanged&&e.selectionChanged()};e.$watchCollection("selectedItems",l),e.isItemSelected=function(t){return e.selectedItems.indexOf(t)>-1},e.calcTableHeight=function(){e.heightOffsetValue&&"function"==typeof e.heightOffsetValue&&(e.containerStyle="height: calc(100% - "+e.heightOffsetValue()+"px);",e.$applyAsync())},angular.element(o).bind("resize",function(){e.calcTableHeight()}),e.calcTableHeight(),e.toggleItemSelected=function(t){var n=e.selectedItems.indexOf(t);n>-1?e.selectedItems.splice(n,1):e.selectedItems.push(t)},e.onItemClicked=function(t,n){e.selectOnClick&&(e.selectedItems=[t]),e.itemClicked&&e.itemClicked(t,n)},e.toggleAll=function(){e.allAreSelected()?e.selectedItems=[]:angular.forEach(e.data,function(t){e.selectedItems.indexOf(t)<0&&e.selectedItems.push(t)})},e.allAreSelected=function(){return e.selectedItems.length===e.data.length},e.getCellText=function(n,o){if(!o)throw"column definition is not defined.";if(!o.path)throw"path must be set, in: "+o;for(var l=o.path.split("."),c=0,a=n;c<l.length&&a;)a=a[l[c]],c++;if("undefined"==typeof a||null===a)return"";if("date"===o.dataType){var i=o.dateFormat||e.defaultDateFormat;a=t("date")(new Date(a),i)}if("function"==typeof o.render){var m=o.render(a,n,o);return"string"==typeof m?m:""+m}return a},e.loadMore=function(){e.loadMoreFn&&e.loadMoreFn()},e.sortField="",e.sortDesc=!1,e.sort=function(t){var n=t.path;t.sortPath&&(n=t.sortPath),e.sortFn&&(e.sortField===n?e.sortDesc=!e.sortDesc:e.sortField=n,e.sortFn(n,e.sortDesc))},e.runCommand=function(t,n,o){o.stopPropagation();var l=e.itemCommands[t];l&&l(n,o)}}];return{restrict:"E",scope:{data:"=",columns:"=",selectable:"=",selectedItems:"=?",selectionChanged:"=?",itemClicked:"=?",selectOnClick:"=?",defaultDateFormat:"@?",compact:"=?",hideHeader:"=",heightOffsetValue:"=?",loadMoreFn:"=?",sortFn:"=?",isLoading:"=?",totalCount:"=?",itemCommands:"=?"},controller:e,template:'<md-virtual-repeat-container style="{{containerStyle}}"><md-table-container><table md-table ng-class="{\'selectable\':selectable}"><thead md-head ng-if="!hideHeader"><tr><th ng-if="selectable"><md-checkbox aria-label="check all" ng-checked="allAreSelected()" ng-click="toggleAll()"></th><th ng-show="(!compact||!column.optional) &&! column.hide" ng-class="{\'numeric\':column.numeric}" ng-repeat="column in columns"><span ng-if="column.sortable" ng-click="sort(column)" class="sort-handler"><span>{{column.title}}</span><md-icon ng-show="sortField===column.path && sortDesc" md-font-set="material-icons">keyboard_arrow_down</md-icon><md-icon ng-show="sortField===column.path && !sortDesc" md-font-set="material-icons">keyboard_arrow_up</md-icon></span><span ng-if="!column.sortable">{{column.title}}</span></th></tr></thead><tbody md-body><tr md-row md-auto-select md-virtual-repeat="item in data" ng-class="{\'selected\':isItemSelected(item), \'clickable\':itemClicked}"><td ng-if="selectable"><md-checkbox aria-label="select" ng-checked="isItemSelected(item)" ng-click="toggleItemSelected(item)"></td><td ng-show="(!compact||!column.optional) &&! column.hide" ng-repeat="column in columns" ng-class="{\'numeric\':column.numeric}" ng-click="onItemClicked(item, $event)"><md-button ng-if="column.commands" class="md-icon-button md-primary" ng-click="runCommand(command.commandName, item,$event)" ng-repeat="command in column.commands"><md-tooltip ng-if="command.tooltip">{{command.tooltip}}</md-tooltip><md-icon md-font-set="material-icons">{{command.icon}}</md-icon></md-button><md-tooltip ng-if="column.tooltipFn&&!column.commands">{{column.tooltipFn(item)}}</md-tooltip><span ng-if="!column.commands">{{getCellText(item, column)}}</span></td></tr></tbody></table><div class="md-padding" layout="row" layout-align="center center"><md-button class="md-primary" ng-click="loadMore()" ng-show="data.length<totalCount&&!isLoading">Load More</md-button><md-progress-circular md-mode="indeterminate" ng-show="isLoading"></md-progress-circular><span class="md-caption" ng-show="totalCount==0&&!isLoading">No item found.</span></div></md-table-container></md-virtual-repeat-container>'}})}();