!function(){"use strict";function e(){function e(e,t,n,l,o,i){function a(t){return!c(t)&&(3===Math.abs(t-e.pageIndex)||void 0)}function c(t){return 0===t||t===m().length-1||(Math.abs(t-e.pageIndex)<3||void 0)}function d(t){t!==e.pageIndex&&S(t,e.pageSize)}function s(t){console.log("page size changed: "+e.pageSize),S(0,e.pageSize)}function m(){for(var t=[],n=Math.ceil(e.totalCount/e.pageSize),l=0;l<n;l++)t.push(l);return t}function r(){e.freezedColumns=[],e.unFreezedColumns=[],angular.forEach(e.columns,function(t){t.freezed?e.freezedColumns.push(t):e.unFreezedColumns.push(t)}),p()}function u(){e.selectionChanged&&e.selectionChanged()}function g(t){return e.selectedItems.indexOf(t)>-1}function p(){var t=0,n=-32;e.selectable&&(t+=54),angular.forEach(e.columns,function(l){"button"===l.type?l.freezed?t+=52:n+=52:e.compact&&l.optional||l.hide||(l.freezed?(l.size=l.size||1,t+=75*l.size+56):(l.size=l.size||1,n+=75*l.size+56))}),e.lineNumber&&(t+=50),n+=48,e.freezedContainerStyle="min-width:"+t+"px";var l=t;e.freezedHeaderStyle="min-width:"+l+"px",e.unFreezedContainerStyle="min-width:"+n+"px";var o=n;e.unFreezedHeaderStyle="min-width:"+o+"px",e.$applyAsync()}function b(t,n){n.stopPropagation();var l=e.selectedItems.indexOf(t);l>-1?e.selectedItems.splice(l,1):e.selectedItems.push(t)}function f(t,n){e.selectOnClick&&(e.selectedItems=[t]),e.itemClicked&&e.itemClicked(t,n)}function h(){e.allAreSelected()?e.selectedItems=[]:angular.forEach(e.data,function(t){e.selectedItems.indexOf(t)<0&&e.selectedItems.push(t)})}function v(){return e.selectedItems.length===e.data.length}function w(n,l){if(!l)throw"column definition is not defined.";if(!l.path)throw"path must be set, in: "+l;for(var o=l.path.split("."),a=0,c=n;a<o.length&&c;)c=c[o[a]],a++;if(void 0===c||null===c)return"";if(l.filter&&(c=Array.isArray(l.filter)?1===l.filter.length?t(l.filter[0])(c):t(l.filter[0])(c,l.filter[1]):t(l.filter)(c)),"date"===l.dataType){var d=l.dateFormat||e.defaultDateFormat;c=t("date")(new Date(c),d)}if("function"==typeof l.render){var s=l.render(c,n,l);return i.trustAsHtml("string"==typeof s?s:""+s)}return c}function C(){e.loadMoreFn&&e.loadMoreFn()}function k(t){var n=t.path;t.sortPath&&(n=t.sortPath),e.sortFn&&(e.sortField===n?e.sortDesc=!e.sortDesc:e.sortField=n,e.sortFn(n,e.sortDesc))}function y(t,n,l){l.stopPropagation();var o=e.itemCommands[t];o&&o(n,l)}function z(e,t,n){n.onClicked&&(e.stopPropagation(),n.onClicked(t,e))}function x(){S(e.pageIndex-1,e.pageSize)}function I(){S(e.pageIndex+1,e.pageSize)}function S(t,n){e.pageIndex=t,e.pageSize=n,e.onPagingChanged(t,n)}e.defaultDateFormat=e.defaultDateFormat||"MM/dd/yyyy",e.selectedItems=e.selectedItems||[],e.selectOnClick=e.selectOnClick||!1,e.totalCount=e.totalCount||0,e.itemCommands=e.itemCommands||{},e.sortField="",e.sortDesc=!1,e.isItemSelected=g,e.toggleItemSelected=b,e.onItemClicked=f,e.toggleAll=h,e.allAreSelected=v,e.getCellText=w,e.loadMore=C,e.sort=k,e.runCommand=y,e.onCellClicked=z,e.tableId=(new Date).getTime(),e.freezedColumns=[],e.unFreezedColumns=[],e.onPagingChanged=e.onPagingChanged||function(){},e.getPages=m,e.showPaginateNumber=c,e.showPaginateSymbol=a,e.changePageIndex=d,e.previousPage=x,e.nextPage=I,e.pageSizeOptions=[20,50,"All"],e.onPageSizeChanged=s,function(){e.$watchCollection("selectedItems",u),e.$watch("compact",p),e.$watch("columns",r)}(),o(function(){var t=angular.element(document.querySelector("#table-header-"+e.tableId)),n=angular.element(document.querySelector("#table-container-freezed-"+e.tableId+" .md-virtual-repeat-scroller"));angular.element(document.querySelector("#table-container-"+e.tableId+" .md-virtual-repeat-scroller")).on("scroll",function(e){t[0]&&(t[0].scrollLeft=e.target.scrollLeft),n[0]&&(n[0].scrollTop=e.target.scrollTop)})})}function t(e,t,n){}var n={restrict:"E",scope:{data:"=",columns:"=",selectable:"=",selectedItems:"=?",selectionChanged:"=?",itemClicked:"=?",selectOnClick:"=?",defaultDateFormat:"@?",compact:"=?",hideHeader:"=",heightOffsetValue:"=?",loadMoreFn:"=?",sortFn:"=?",isLoading:"=?",totalCount:"=?",itemCommands:"=?",lineNumber:"=?",paging:"=?",pageIndex:"=?",pageSize:"=?",onPagingChanged:"=?"},controller:e,template:'<div layout="row" flex><div class="tw-table-columns--freezed"><section layout="row" id="table-header-freezed-{{tableId}}" class="tw-table-header" ng-if="!hideHeader" style="{{freezedHeaderStyle}}"><div layout="row"><div class="tw-table-cell tw-table-line-number-cell" ng-if="lineNumber"></div><div class="tw-table-cell tw-table-check-cell" ng-if="selectable"><md-checkbox aria-label="check all" ng-checked="allAreSelected()" ng-click="toggleAll()"></div><div class="tw-table-cell x{{column.size}}" ng-show="(!compact||!column.optional) &&! column.hide" ng-class="{\'numeric\':column.numeric,\'tw-table-button-cell\':column.type===\'button\',\'tw-table-text-cell\':column.type!==\'button\'}" ng-repeat="column in freezedColumns"><div ng-if="column.sortable" ng-click="sort(column)" class="sort-handler"><span>{{column.title}}</span><md-icon ng-show="sortField===column.path && sortDesc" md-font-set="material-icons">keyboard_arrow_down</md-icon><md-icon ng-show="sortField===column.path && !sortDesc" md-font-set="material-icons">keyboard_arrow_up</md-icon></div><span ng-if="!column.sortable">{{column.title}}</span></div></div></section><md-virtual-repeat-container id="table-container-freezed-{{tableId}}" style="{{freezedContainerStyle}}"><div class="tw-table-row" layout="row" md-virtual-repeat="item in data" ng-class="{\'selected\':isItemSelected(item), \'clickable\':itemClicked}" ng-click="onItemClicked(item, $event)"><div class="tw-table-cell tw-table-line-number-cell" ng-if="lineNumber">{{$index+1+pageIndex*pageSize}}</div><div ng-if="selectable" class="tw-table-cell tw-table-check-cell"><md-checkbox aria-label="select" ng-checked="isItemSelected(item)" ng-click="toggleItemSelected(item, $event)"></div><div ng-repeat="column in freezedColumns" ng-show="(!compact||!column.optional) && !column.hide" class="tw-table-cell x{{column.size}}" ng-class="{\'tw-table-button-cell\':column.type===\'button\', \'numeric\':column.numeric,\'tw-table-text-cell\':column.type!==\'button\'}"><md-tooltip ng-if="column.tooltip && !column.tooltipFn">{{column.tooltip}}</md-tooltip><md-tooltip ng-if="column.tooltipFn">{{column.tooltipFn(item)}}</md-tooltip><md-button ng-if="column.type===\'button\'" class="md-icon-button md-primary" ng-click="onCellClicked($event, item, column)"><md-icon md-font-set="material-icons">{{column.icon}}</md-icon></md-button><span ng-click="onCellClicked($event, item, column)" ng-if="column.type!==\'button\'" ng-class="{\'clickable\':column.onClicked}" ng-bind-html="getCellText(item, column)" class="cell-text"></span></div></div><div class="table-container-freezed-placeholder"></div></md-virtual-repeat-container></div><div class="tw-table-columns" flex><section layout="row" id="table-header-{{tableId}}" class="tw-table-header" ng-if="!hideHeader"><div layout="row" style="{{unFreezedHeaderStyle}}"><div class="tw-table-cell x{{column.size}}" ng-show="(!compact||!column.optional) &&! column.hide" ng-class="{\'numeric\':column.numeric,\'tw-table-button-cell\':column.type===\'button\',\'tw-table-text-cell\':column.type!==\'button\'}" ng-repeat="column in unFreezedColumns"><div ng-if="column.sortable" ng-click="sort(column)" class="sort-handler"><span>{{column.title}}</span><md-icon ng-show="sortField===column.path && sortDesc" md-font-set="material-icons">keyboard_arrow_down</md-icon><md-icon ng-show="sortField===column.path && !sortDesc" md-font-set="material-icons">keyboard_arrow_up</md-icon></div><span ng-if="!column.sortable">{{column.title}}</span></div></div></section><md-virtual-repeat-container id="table-container-{{tableId}}"><div style="{{unFreezedContainerStyle}}" class="tw-table-row" layout="row" md-virtual-repeat="item in data" ng-class="{\'selected\':isItemSelected(item), \'clickable\':itemClicked}" ng-click="onItemClicked(item, $event)"><div ng-repeat="column in unFreezedColumns" ng-show="(!compact||!column.optional) && !column.hide" class="tw-table-cell x{{column.size}}" ng-class="{\'tw-table-button-cell\':column.type===\'button\', \'numeric\':column.numeric,\'tw-table-text-cell\':column.type!==\'button\'}"><md-tooltip ng-if="column.tooltip && !column.tooltipFn">{{column.tooltip}}</md-tooltip><md-tooltip ng-if="column.tooltipFn">{{column.tooltipFn(item)}}</md-tooltip><md-button ng-if="column.type===\'button\'" class="md-icon-button md-primary" ng-click="onCellClicked($event, item, column)"><md-icon md-font-set="material-icons">{{column.icon}}</md-icon></md-button><span ng-click="onCellClicked($event, item, column)" ng-if="column.type!==\'button\'" ng-class="{\'clickable\':column.onClicked}" ng-bind-html="getCellText(item, column)" class="cell-text"></span></div></div><div class="md-padding" layout="row" layout-align="center center"><md-button class="md-primary" ng-if="!paging" ng-click="loadMore()" ng-show="data.length<totalCount&&!isLoading">Load More</md-button><md-progress-circular md-mode="indeterminate" ng-show="isLoading"></md-progress-circular><span class="md-caption" ng-show="totalCount==0&&!isLoading">No item found.</span></div></md-virtual-repeat-container></div></div><div ng-show="paging" class="tw-ui-table-pagination"><div class="paginate-section"><label>Rows per page:</label><md-select ng-model="pageSize" ng-change="onPageSizeChanged($event)" aria-label="on change page size" ng-disabled="isLoading" class="md-no-underline"><md-option value="20">20</md-option><md-option value="50">50</md-option><md-option ng-value="totalCount">All</md-option></md-select></div><div class="paginate-section"><span>{{pageIndex*pageSize+1}} - {{(pageIndex+1)*pageSize}} of {{totalCount}}</span></div><div class="paginate-section"><md-button class="md-icon-button" ng-click="previousPage()" ng-disabled="isLoading || pageIndex===0"><md-icon md-font-set="material-icons">keyboard_arrow_left</md-icon></md-button><div class="page-indicator" ng-repeat="page in getPages()"><span class="paginate-symbol" ng-if="showPaginateSymbol(page)">...</span><md-button ng-disabled="isLoading" ng-click="changePageIndex(page)" class="paginate-number" ng-if="showPaginateNumber(page)" ng-class="{\'current\':page===pageIndex}">{{page+1}}</md-button></div><md-button class="md-icon-button" ng-click="nextPage()" ng-disabled="isLoading || (pageIndex+1)>=getPages().length"><md-icon md-font-set="material-icons">keyboard_arrow_right</md-icon></md-button></div></div>',link:t};return e.$inject=["$scope","$filter","$mdDialog","$window","$timeout","$sce"],n}function t(){function e(e,t){function n(n){t.show({controller:l,parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!1,template:'<md-dialog><md-toolbar><div class="md-toolbar-tools"><h2>Choose Columns</h2><span flex></span><md-button class="md-icon-button" ng-click="cancel()"><md-icon md-font-set="material-icons">close</md-icon></md-button></div></md-toolbar><md-dialog-content><div class="md-dialog-content"><div ng-repeat="column in columns" ng-if="column.title"><md-checkbox ng-disabled="!column.optional" ng-checked="!column.hide" ng-click="toggle(column)">{{column.title}}</md-checkbox></div></div></md-dialog-content><md-dialog-actions><md-button ng-click="hide()" class="md-primary">close</md-button></md-dialog-actions></md-dialog>',locals:{columns:e.columns}})}function l(e,t,n){function l(){t.hide()}function o(){t.cancel()}function i(e){e.hide=!e.hide}e.hide=l,e.cancel=o,e.toggle=i,e.columns=n}e.showPicker=n,l.$inject=["$scope","$mdDialog","columns"]}var t={restrict:"E",controller:e,template:'<md-button class="md-primary md-icon-button" ng-click="showPicker($event)"><md-tooltip>columns</md-tooltip><md-icon md-font-set="material-icons">view_column</md-icon></md-button>',scope:{columns:"="}};return e.$inject=["$scope","$mdDialog"],t}angular.module("tw.ui.table",["ngMaterial","ngSanitize"]).directive("twUiTable",e).directive("twUiTableColumnsPicker",t)}();