!function(){"use strict";function e(){function e(e,t,n,l){function o(){e.$watchCollection("selectedItems",c),e.$watch("compact",i)}function c(){e.selectionChanged&&e.selectionChanged()}function a(t){return e.selectedItems.indexOf(t)>-1}function i(){var t=0;e.selectable&&(t+=54),angular.forEach(e.columns,function(n){"command"===n.type?t+=52:e.compact&&n.optional||(n.size=n.size||1,t+=75*n.size+56)}),e.containerStyle="min-width:"+t+"px",e.$applyAsync()}function s(t,n){n.stopPropagation();var l=e.selectedItems.indexOf(t);l>-1?e.selectedItems.splice(l,1):e.selectedItems.push(t)}function m(t,n){e.selectOnClick&&(e.selectedItems=[t]),e.itemClicked&&e.itemClicked(t,n)}function d(){e.allAreSelected()?e.selectedItems=[]:angular.forEach(e.data,function(t){e.selectedItems.indexOf(t)<0&&e.selectedItems.push(t)})}function r(){return e.selectedItems.length===e.data.length}function u(n,l){if(!l)throw"column definition is not defined.";if(!l.path)throw"path must be set, in: "+l;for(var o=l.path.split("."),c=0,a=n;c<o.length&&a;)a=a[o[c]],c++;if("undefined"==typeof a||null===a)return"";if("date"===l.dataType){var i=l.dateFormat||e.defaultDateFormat;a=t("date")(new Date(a),i)}if("function"==typeof l.render){var s=l.render(a,n,l);return"string"==typeof s?s:""+s}return a}function g(){e.loadMoreFn&&e.loadMoreFn()}function p(t){var n=t.path;t.sortPath&&(n=t.sortPath),e.sortFn&&(e.sortField===n?e.sortDesc=!e.sortDesc:e.sortField=n,e.sortFn(n,e.sortDesc))}function f(t,n,l){l.stopPropagation();var o=e.itemCommands[t];o&&o(n,l)}e.defaultDateFormat=e.defaultDateFormat||"MM/dd/yyyy",e.selectedItems=e.selectedItems||[],e.selectOnClick=e.selectOnClick||!1,e.containerStyle=e.containerStyle||"wdith:100%;",e.totalCount=e.totalCount||10,e.itemCommands=e.itemCommands||{},e.sortField="",e.sortDesc=!1,e.isItemSelected=a,e.toggleItemSelected=s,e.onItemClicked=m,e.toggleAll=d,e.allAreSelected=r,e.getCellText=u,e.loadMore=g,e.sort=p,e.runCommand=f,o()}function t(e,t,l){var o=t[0].getElementsByClassName("md-virtual-repeat-scroller"),c=angular.element(o);c.on("scroll",function(l){n(e,t,l)})}function n(e,t,n){var l=n.currentTarget.scrollHeight-n.currentTarget.scrollTop-n.currentTarget.clientHeight;l<300&&e.totalCount>e.data.length&&!e.isLoading&&(e.isLoading=!0,e.loadMore())}var l={restrict:"E",scope:{data:"=",columns:"=",selectable:"=",selectedItems:"=?",selectionChanged:"=?",itemClicked:"=?",selectOnClick:"=?",defaultDateFormat:"@?",compact:"=?",hideHeader:"=",heightOffsetValue:"=?",loadMoreFn:"=?",sortFn:"=?",isLoading:"=?",totalCount:"=?",itemCommands:"=?"},controller:e,link:t,template:'<section layout="row" class="tw-table-header" ng-if="!hideHeader" style="{{containerStyle}}"><div class="tw-table-cell tw-table-cell-check" ng-if="selectable"><md-checkbox aria-label="check all" ng-checked="allAreSelected()" ng-click="toggleAll()"></div><div class="tw-table-cell x{{column.size}}" ng-show="(!compact||!column.optional) &&! column.hide" ng-class="{\'numeric\':column.numeric,\'tw-table-cell-command\':column.type===\'command\',\'tw-table-cell-text\':column.type!==\'command\'}" ng-repeat="column in columns"><div ng-if="column.sortable" ng-click="sort(column)" class="sort-handler"><span>{{column.title}}</span><md-icon ng-show="sortField===column.path && sortDesc" md-font-set="material-icons">keyboard_arrow_down</md-icon><md-icon ng-show="sortField===column.path && !sortDesc" md-font-set="material-icons">keyboard_arrow_up</md-icon></div><span ng-if="!column.sortable">{{column.title}}</span></div></section><md-virtual-repeat-container style="{{containerStyle}}"><div class="tw-table-row" layout="row" md-virtual-repeat="item in data" ng-class="{\'selected\':isItemSelected(item), \'clickable\':itemClicked}" ng-click="onItemClicked(item, $event)"><div ng-if="selectable" class="tw-table-cell tw-table-cell-check"><md-checkbox aria-label="select" ng-checked="isItemSelected(item)" ng-click="toggleItemSelected(item, $event)"></div><div ng-repeat="column in columns" ng-show="(!compact||!column.optional) && !column.hide" class="tw-table-cell x{{column.size}}" ng-class="{\'tw-table-cell-command\':column.type===\'command\',\'numeric\':column.numeric,\'tw-table-cell-text\':column.type!==\'command\'}"><md-button ng-if="column.type===\'command\'" class="md-icon-button md-primary" ng-click="runCommand(column.commandName, item,$event)"><md-tooltip ng-if="column.tooltip">{{column.tooltip}}</md-tooltip><md-icon md-font-set="material-icons">{{column.icon}}</md-icon></md-button><md-tooltip ng-if="column.tooltipFn&&column.type!==\'command\'">{{column.tooltipFn(item)}}</md-tooltip><span ng-if="column.type!==\'command\'">{{getCellText(item, column)}}</span></div></div><div class="tw-table-loading-placeholder"><md-progress-linear md-mode="indeterminate" class="md-warn" ng-show="isLoading"></md-progress-linear></div><div class="md-padding" layout="row" ng-show="totalCount==0&&!isLoading" layout-align="center center"><span class="md-caption">No item found.</span></div></md-virtual-repeat-container>'};return e.$inject=["$scope","$filter","$mdDialog","$window"],l}angular.module("tw.ui.table",["ngMaterial"]).directive("twUiTable",e)}();